{"ast":null,"code":"import _regeneratorRuntime from \"/Users/gabrielgodwin/dev/groove/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/gabrielgodwin/dev/groove/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nvar client_id = \"7170734b02ff544e2ad34d6d376f6b474\";\nvar client_secret = \"dcda9cd1ce3240b0880e01dc2066a731\";\nexport default {\n  data: function data() {\n    return {\n      client_id: client_id,\n      client_secret: client_secret,\n      loadingPage: false\n    };\n  },\n  created: function created() {\n    this.getAccessToken();\n  },\n  methods: {\n    getAccessToken: function getAccessToken() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var config, result, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.loadingPage = true;\n                config = {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                  },\n                  body: \"grant_type=client_credentials&client_id=\".concat(client_id, \"&client_secret=\").concat(client_secret)\n                };\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(\"https://accounts.spotify.com/api/token\", config);\n\n              case 5:\n                result = _context.sent;\n                _context.next = 8;\n                return result.json();\n\n              case 8:\n                response = _context.sent;\n                localStorage.setItem(\"access_token\", response === null || response === void 0 ? void 0 : response.access_token);\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](2);\n                return _context.abrupt(\"return\", _context.t0);\n\n              case 15:\n                _context.prev = 15;\n                _this.loadingPage = false;\n                return _context.finish(15);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 12, 15, 18]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["client_id","client_secret","data","loadingPage","created","getAccessToken","methods","config","method","headers","body","fetch","result","json","response","localStorage","setItem","access_token"],"sources":["/Users/gabrielgodwin/dev/groove/src/mixins/spotify-mixin.js"],"sourcesContent":["const client_id = \"7170734b02ff544e2ad34d6d376f6b474\";\nconst client_secret = \"dcda9cd1ce3240b0880e01dc2066a731\";\n\nexport default {\n  data() {\n    return {\n      client_id,\n      client_secret,\n      loadingPage: false,\n    };\n  },\n  created() {\n    this.getAccessToken();\n  },\n  methods: {\n    async getAccessToken() {\n      this.loadingPage = true;\n      const config = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        body: `grant_type=client_credentials&client_id=${client_id}&client_secret=${client_secret}`,\n      };\n      try {\n        const result = await fetch(\n          \"https://accounts.spotify.com/api/token\",\n          config\n        );\n        const response = await result.json();\n        localStorage.setItem(\"access_token\", response?.access_token);\n      } catch (err) {\n        return err;\n      } finally {\n        this.loadingPage = false;\n      }\n    },\n  },\n};\n"],"mappings":";;;AAAA,IAAMA,SAAS,GAAG,mCAAlB;AACA,IAAMC,aAAa,GAAG,kCAAtB;AAEA,eAAe;EACbC,IADa,kBACN;IACL,OAAO;MACLF,SAAS,EAATA,SADK;MAELC,aAAa,EAAbA,aAFK;MAGLE,WAAW,EAAE;IAHR,CAAP;EAKD,CAPY;EAQbC,OARa,qBAQH;IACR,KAAKC,cAAL;EACD,CAVY;EAWbC,OAAO,EAAE;IACDD,cADC,4BACgB;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACrB,KAAI,CAACF,WAAL,GAAmB,IAAnB;gBACMI,MAFe,GAEN;kBACbC,MAAM,EAAE,MADK;kBAEbC,OAAO,EAAE;oBACP,gBAAgB;kBADT,CAFI;kBAKbC,IAAI,oDAA6CV,SAA7C,4BAAwEC,aAAxE;gBALS,CAFM;gBAAA;gBAAA;gBAAA,OAUEU,KAAK,CACxB,wCADwB,EAExBJ,MAFwB,CAVP;;cAAA;gBAUbK,MAVa;gBAAA;gBAAA,OAcIA,MAAM,CAACC,IAAP,EAdJ;;cAAA;gBAcbC,QAda;gBAenBC,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,QAArC,aAAqCA,QAArC,uBAAqCA,QAAQ,CAAEG,YAA/C;gBAfmB;gBAAA;;cAAA;gBAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAmBnB,KAAI,CAACd,WAAL,GAAmB,KAAnB;gBAnBmB;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAqBtB;EAtBM;AAXI,CAAf"},"metadata":{},"sourceType":"module"}